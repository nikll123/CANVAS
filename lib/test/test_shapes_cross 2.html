<html>

<head>
  <script src="..\BasicShape.js"></script>
  <script src="..\Canvas.js"></script>
  <script src="..\Calc.js"></script>
  <script src="..\Const.js"></script>
  <script src="..\Primitives.js"></script>
  <script src="..\ArcShapes.js"></script>
  <script src="..\Vector.js"></script>
  <script src="..\Outline.js"></script>
  <script src="..\PoligonShapes.js"></script>
  <script src="..\MouseTouchTracker.js"></script>

  <script src="..\test\ut_Obj.js"></script>
  <script src="..\test\ut_Angles.js"></script>
  <script src="..\test\ut_Calc.js"></script>
  <script src="..\test\ut_Shapes.js"></script>
  <script src="..\test\ut_Vector.js"></script>
  <script src="..\test\ut_primitives.js"></script>
</head>

<body onload="draw()">

  <div>
    <input type="checkbox" id="chkDebugMode" name="Draft">
    <label for="Draft">Draft</label>
    <input type="checkbox" id="chkShowDetails" name="Details">
    <label for="Details">Details</label>
  </div>

  <script>
    debugMode = false;
    let objDebugMode = document.querySelector('input[id="chkDebugMode"]');
    objDebugMode.addEventListener('change', () => {
      debugMode = objDebugMode.checked;
    })

    showDetails = false;
    let objShowDetails = document.querySelector('input[id="chkShowDetails"]');
    objShowDetails.addEventListener('change', () => {
      showDetails = objShowDetails.checked;
    })
  </script>

  <canvas id="canvas" style="border: 1px solid" width="600" height="600"></canvas>

  <script>
    let canvas = document.getElementById('canvas');
    let ctx = canvas.getContext('2d');

    function draw() {
      Canvas.clearAll(ctx);
      Canvas.grid(ctx);

      let objs = [];

      // let c2_1 = new Arc(120, 100, 50, new Angle(0.5, PI*0.5), CW, 'c2_1');
      // let c2_2 = new Arc(120, 250, 50, new Angle(0.5, -PI*0.5), CCW, 'c2_2');
      // let c2_3 = new CircleComposite(420, 100, 50,[new Angle(0, DVA_PI - 0.5)]);
      // c2_1.draft(ctx);
      // c2_2.draft(ctx);
      // c2_3.draft(ctx);
      // c2_1.showDetails(ctx);
      // c2_2.showDetails(ctx);
      // c2_3.showDetails(ctx);

      let c1;
      c1 = new CircleComposite(420, 250, 40,[new Angle(0, 0.1)]);
      c1.draft(ctx);
      c1 = new CircleComposite(420, 250, 40,[new Angle(0, 1)]);
      c1.draft(ctx);
      c1 = new CircleComposite(420, 250, 40,[new Angle(0, 2)]);
      c1.draft(ctx);
      c1 = new CircleComposite(420, 250, 40,[new Angle(0, 3)]);
      c1.draft(ctx);
      c1 = new CircleComposite(420, 250, 40,[new Angle(0, 4)]);
      c1.draft(ctx);
      c1 = new CircleComposite(420, 250, 40,[new Angle(0, 5)]);
      c1.draft(ctx);
      c1 = new CircleComposite(420, 250, 40,[new Angle(0, 6)]);
      c1.draft(ctx);
      c1 = new CircleComposite(420, 450, 40,[new Angle(0, DVA_PI), new Angle(DVA_PI, DVA_PI)]);
      c1.draft(ctx);

      // let c2 = new CircleComposite(440, 100, 50, [new Angle(0, DVA_PI)], 'c1');
      // let l2 = new Vector(400, 50, 400, 350, 'l1');
      // res = Calc.crossCircleLine(c2, l2);
      // if (res.length == 2) {
      //   [angle1, angle2] = res;
      //   c2.setAngles([angle1, angle2]);
      // }
      // objs.push(c2);
      // objs.push(l2);
      // let c22 = new CircleComposite(380, 250, 50, [new Angle(0, DVA_PI)], 'c22');
      // res = Calc.crossCircleLine(c22, l2);
      // if (res.length == 2) {
      //   [angle1, angle2] = res;
      //   c22.setAngles([angle1, angle2]);
      // }
      // objs.push(c22);

      // let c3 = new CircleComposite(200, 450, 100, [new Angle(0, DVA_PI)], 'c1');
      // let l3 = new Vector(250, 350, 250, 550, 'l1');
      // [angle1, angle2] = Calc.crossCircleLine(c3, l3);
      // c3.setAngles([angle1, angle2]);
      // objs.push(c3);
      // objs.push(l3);

      // for (let i = 0; i < objs.length; i++) {
      //   if (debugMode)
      //     objs[i].draft(ctx);
      //   else
      //     objs[i].render(ctx, 1);

      //   if (showDetails)
      //     objs[i].showDetails(ctx);
      // }

      // if (showDetails)
      //   l4.showDetails(ctx);

      window.requestAnimationFrame(draw);
    }
  </script>
</body>

</html>