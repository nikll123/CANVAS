<html>

<head>
  <script src="..\BasicShape.js"></script>
  <script src="..\Canvas.js"></script>
  <script src="..\Calc.js"></script>
  <script src="..\Const.js"></script>
  <script src="..\Primitives.js"></script>
  <script src="..\ArcShapes.js"></script>
  <script src="..\PoligonShapes.js"></script>
  <script src="..\MouseTouchTracker.js"></script>

  <script src="..\test\ut_Obj.js"></script>
  <script src="..\test\ut_Angles.js"></script>
  <script src="..\test\ut_Calc.js"></script>
  <script src="..\test\ut_Shapes.js"></script>
  <script src="..\test\ut_primitives.js"></script>
</head>

<body onLoad="draw()">

  <div>
    <input type="checkbox" id="chkDebugMode">
    <label for="debugMode">Debug</label>
    <input type="checkbox" id="chkShowDetails">
    <label for="chkShowDetails">Details</label>
  </div>

  <script>
    let debugMode = false;
    let chkDebugMode = document.querySelector('input[id="chkDebugMode"]');
    chkDebugMode.addEventListener('change', () => {
      debugMode = chkDebugMode.checked;
    })
    let showDetails = false;
    let chkDetails = document.querySelector('input[id="chkShowDetails"]');
    chkDetails.addEventListener('change', () => {
      showDetails = chkDetails.checked;
    })
  </script>

  <canvas id="canvas" style="border: 1px solid" width="600" height="600"></canvas>

  <script>
    let canvas = document.getElementById('canvas');
    let ctx = canvas.getContext('2d');

    function draw() {
      Canvas.clearAll(ctx);
      Canvas.grid(ctx);

      // Text 
      let txt = new Text(10, 50, "Points", "txt1");
      txt.render(ctx);
      let p1 = new Point(10, 75, 'p1');
      if (debugMode) {
        p1.draft(ctx);
      }
      else {
        p1.render(ctx, 3);
      }
      txt = new Text(100, 75, 'text example', 'txt1');
      if (debugMode)
        txt.draft(ctx);
      else
        txt.render(ctx);

      txt = new Text(100, 105, "draft");
      txt.render(ctx, DRAFT_COLOR);

      let p2 = new Point(10, 105, 'p2');
      p2.draft(ctx);

      // Angle
      let a1 = new Angle(1, 5, 'ang0');
      let x = 200;
      let y = 100;
      let r = 50;

      let arc1 = new Arc(x, y, r, a1, CW);
      if (debugMode)
        arc1.draft(ctx);
      else
        arc1.render(ctx);

      if (showDetails) {
        arc1.showDetails(ctx);
      }

      // decimal coordinates
      y = 150;
      x = 10;
      for (i = 0; i < 100; i++) {
        let p1 = new Point(x + i, y + i / 100);
        p1.render(ctx, 0.1);
      }

      window.requestAnimationFrame(draw);
    }
  </script>
</body>

</html>